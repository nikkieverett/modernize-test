<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Modernize - Take Home Test</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="container">
      <form class="form" action="/" method="post">
        <div class="form-header">
          Enter to win a 3rd generation Nest  Learning Thermostat worth $249.
        </div>
        <input type="text" id="name" name="name" placeholder="Your Name" required="true"/>
        <input type="text" id="tel" name="tel" min="10" placeholder="Phone Number" data-inputmask="" pattern="\d{3}[\-]\d{3}[\-]\d{4}" required="true"/>
        <input type="email" id="email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" placeholder="Email Address" required="true"/>
        <button class="submit" type="submit">Enter to Win</button>
      </form>
      <fieldset>
        <legend>find more savings here</legend>
        <div class="more-container">
          <p class="ad">Advertorial</p>
          <p class="more-header">Tricks Homeowners Use to Eliminate Bills</p>
          <p class="more-content">Surging energy bills, unpredictable weather patterns and dissatisfaction with utility companies have homeowners scrambling… <a href="https://modernize.com/home2">READ MORE</a></p>
        </div>
      </fieldset>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="jquery.maskedinput.js" type="text/javascript"></script>
    <script>
        $("#tel").mask("999-999-9999");
        $("form").on('submit', function(e) {
          e.preventDefault();

          let name = $('#name').val().split(' ');

          var data = {
            firstName: name[0],
            lastName: name[1],
            cellPhone: $('#tel').val(),
            email: $('#email').val()
          }
          $.ajax({
            type: 'POST',
            url: 'https://formsws-hilstaging-com-0adj9wt8gzyq.runscope.net/solar',
            data: data,
            complete: function(data) {
                console.log(data)
            },
            success: function (data) {
              if(data.type == 'error')
                { output = '<div class="error">'+data.text+'</div>';
              } else {
                alert('form was submitted');
              }
            }
          })
        });
    </script>

  </body>
</html>
